<% content_for(:title) { "New Game" } %>

<div class= "games new">
  <%= form_tag(igdb_index_path, method: :get) do %>
    <%= text_field_tag(:search, params[:search]) %>
    <%= submit_tag("Search", class: "btn btn-primary") %>
  <% end %>

  <table class="paddingBetweenCols" summary="Game list">
    <tr class="header">
      <th>Name</th>
      <th>Platforms</th>
      <th>Genres</th>
    </tr>
    <% @games&.each do |game| %>
      <%= tag.tr(name: game['name']) do %>
        <td><%= game['name'] %></td>
        <td><%= game['platforms']&.map{ |platform| platform['name'] }&.join(", ")&.html_safe %></td>
        <td><%= game['genres']&.map{ |genre| genre['name'] }&.join(", ")&.html_safe %></td>
      <% end %>
    <% end %>
  </table>
</div>
